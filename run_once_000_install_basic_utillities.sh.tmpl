#!/bin/bash -e
{{ if eq .chezmoi.os "linux" -}}
    {{   if (.chezmoi.kernel.osrelease | lower | contains "microsoft") }}
    sudo apt-get update -y

    packages=(
        curl \
        git \
        jq \
        neovim \
    )

    {{ else }}
    
    sudo apt-get update -y

    packages=(
        curl \
        git \
        jq \
        neovim \
    )
    for package in "${packages[@]}"; do
        (sudo dpkg -l "$package" > /dev/null && echo "El paquete '$package' ya est치 instalado") \
            || sudo apt-get install -y "$package"
    done
    {{   end }}
{{ else if eq .chezmoi.os "darwin" -}}
xcode-select --install || echo "XCode CLI tools ya est치 instalado"
brew --version || (/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)")
wget --version || brew install wget
((brew info cmake | grep -i "no est치 instalado") && brew install cmake) || echo "cmake ya est치 instalado"
which jq || brew install jq
{{ end -}}
